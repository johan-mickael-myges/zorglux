{% extends 'base.html.twig' %}

{% set title = 'Zorglux - Les Derniers Articles' %}
{% set description = "Découvrez les derniers articles sur Zorglux, une plateforme dynamique dédiée aux blogueurs et aux créateurs de contenu. Lisez, écrivez et partagez vos idées avec une communauté passionnée." %}
{% set logoUrl = 'https://zorglux-bucket.s3.eu-north-1.amazonaws.com/default/logo.png' %}

{% block title %}{{ title }}{% endblock %}

{% block meta %}
    <meta name="description" content="{{ description }}">
    <meta name="author" content="Zorglux">
{% endblock %}

{% block meta_og %}
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ description }}">
    <meta property="og:image" content="{{ logoUrl }}">
    <meta property="og:url" content="{{ path('blog_index') }}">
    <meta property="og:type" content="website">
{% endblock %}

{% block meta_twitter %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ title }}">
    <meta name="twitter:description" content="{{ description }}">
    <meta name="twitter:image" content="{{ logoUrl }}">
{% endblock %}

{% block jsonld %}
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Blog",
            "headline": "{{ title }}",
            "description": "{{ description }}",
            "image": "{{ logoUrl }}",
            "author": {
                "@type": "Organization",
                "name": "Zorglux",
                "logo": "{{ logoUrl }}",
                "url": "https://www.zorglux.works"
            },
            "publisher": {
                "@type": "Organization",
                "name": "Zorglux",
                "logo": {
                    "@type": "ImageObject",
                    "url": "{{ logoUrl }}"
                }
            },
            "url": "{{ path('blog_index') }}"
        }
    </script>

    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "ItemList",
            "itemListElement": [
            {% for blog in blogs %}
                {
                    "@type": "ListItem",
                    "position": {{ loop.index }},
                    "url": "{{ path('blog_read', { slug: blog.slug }) }}",
                    "name": "{{ blog.title }}"
                }{% if not loop.last %},{% endif %}
            {% endfor %}
        ]
    }
    </script>
{% endblock %}

{% block body %}
    {% set contentWrapperClasses = [
        'flex',
        'flex-row',
        'grow',
        'justify-center',
        'items-center',
    ]|join(' ') %}

    {% set contentClasses = [
        'w-full',
        'px-5',
        'md:w-2/3',
    ]|join(' ') %}

    <div class="flex flex-col h-screen border-b border-b-gray-100">
        <header {{ stimulus_controller('menu_toggler') }}>
            {% include '@common/navbar.html.twig' %}
        </header>

        <div class="{{ contentWrapperClasses }}">
            <div class="{{ contentClasses }}">
                <h1 class="text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-bold my-0 text-gray-500">Zorglux</h1>
                <h2 class="text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-bold my-0">Idées</h2>
                <h2 class="text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-bold my-0">Articles</h2>
                <p class="my-5 text-lg md:text-xl lg:text-2xl">Une place pour lire, écrire, et approfondir les connaissances</p>
                <button
                    {{ stimulus_controller('clickable', { url: path('blog_index'), title: 'Découvrir la liste des articles' }) }}
                    {{ stimulus_action('clickable', 'visit', 'click') }}
                    class="w-full sm:w-2/3 md:w-1/2 lg:w-1/3 xl:1/4 text-white bg-black rounded-md px-4 py-2 md:px-6 md:py-3">
                    Découvrir
                </button>
                <a href="#latest-posts">
                    <p class="absolute bottom-0 text-2xl text-gray-500 mb-2 font-extrabold">
                        ↓ <small class="text-xs font-normal">Post récents</small>
                    </p>
                </a>
            </div>
        </div>
    </div>

    <div id="latest-posts" class="{{ contentWrapperClasses }}">
        <div class="{{ contentClasses }}">
            <h2 class="font-bold">Les derniers posts</h2>
            {% include '@public/partials/latest-posts.html.twig' %}
        </div>
    </div>

    {% include '@common/footer.html.twig' %}
{% endblock %}
