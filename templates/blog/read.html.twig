{% extends '@common/user/base.html.twig' %}

{% block meta %}
    <meta name="description" content="{{ blog.description }}">
    <meta name="author" content="{{ blog.author.username }}">
{% endblock %}

{% block meta_og %}
    <meta property="og:title" content="{{ blog.title }}">
    <meta property="og:description" content="{{ blog.description }}">
    <meta property="og:image" content="{{ blog.thumbnail }}">
    <meta property="og:url" content="{{ path('blog_read', { slug: blog.slug }) }}">
{% endblock %}

{% block meta_twitter %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ blog.title }}">
    <meta name="twitter:description" content="{{ blog.description }}">
    <meta name="twitter:image" content="{{ blog.thumbnail }}">
{% endblock %}

{% block title %}{{ blog.title }}{% endblock %}

{% block body_header %}
    {% embed '@common/navbar.html.twig' %}
    {% endembed %}
{% endblock %}

{% block body_content %}
    <twig:Container itemscope itemtype="https://schema.org/BlogPosting">
        <meta itemprop="mainEntityOfPage" content="{{ path('blog_read', { slug: blog.slug }) }}">
        <meta itemprop="author" content="{{ blog.author.username }}">
        <meta itemprop="datePublished" content="{{ blog.createdAt|date('Y-m-d') }}">
        <meta itemprop="dateModified" content="{{ blog.updatedAt|date('Y-m-d') }}">
        <meta itemprop="image" content="{{ blog.thumbnail }}">

        <div itemprop="publisher" itemscope itemtype="https://schema.org/Organization">
            <meta itemprop="name" content="Nom de votre organisation">
            <div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject">
                <meta itemprop="url" content="URL du logo de votre organisation">
            </div>
        </div>

        <h1 itemprop="headline" class="mt-8 text-5xl font-bold mb-2">{{ blog.title }}</h1>
        <h2 itemprop="description" class="text-lg text-gray-500 mb-4 font-normal">{{ blog.description }}</h2>

        <div class="flex flex-row items-center mb-4" itemprop="author" itemscope itemtype="https://schema.org/Person">
            <twig:Avatar
                img="{{ blog.author.avatar|default('https://zorglux-bucket.s3.eu-north-1.amazonaws.com/default/avatar.jpg') }}"
                classes="mr-2"
                imageClasses="rounded-full object-cover"
                size="30"
            />
            <div>
                <span class="text-sm" itemprop="name">{{ blog.author.username }}</span>
                <div class="text-xs text-gray-500">
                    <span>{{ blog.readingTime }} min de lecture</span>
                    <span> . </span>
                    <time datetime="{{ blog.createdAt|date }}" itemprop="datePublished">{{ blog.createdAt|date('d F Y H:i')|trans }}</time>
                </div>
            </div>
        </div>

        <div class="border-y border-y-gray-100 py-3 text-sm text-gray-500 flex flex-row justify-between">
            <div class="grid grid-cols-2 gap-2">
                <twig:LikeButton class="col-span-1" :blog="blog" />
                <twig:CommentButton class="col-span-1" :blog="blog" />
            </div>

            <div class="flex flex-row items-center">
                <span class="mr-3 text-xs italic">Partager sur</span>
                <div class="grid grid-cols-4 gap-2">
                    <twig:SocialShare service="twitter" text="{{ blog.title }}" :url="app.request.uri"/>
                    <twig:SocialShare service="facebook" :url="app.request.uri"/>
                    <twig:SocialShare service="linkedin" :url="app.request.uri"/>
                    <twig:SocialShare service="reddit" :url="app.request.uri"/>
                </div>
            </div>
        </div>

        <div class="flex flex-row justify-center">
            <img src="{{ blog.thumbnail }}" alt="{{ blog.title }}" class="w-full object-cover my-8" itemprop="image" />
        </div>

        <div class="wysiwyg font-times text-lg" itemprop="articleBody">
            {{ blog.content|raw }}
        </div>

        <div class="py-5">
            <h3 class="text-lg">Ces articles peuvent aussi vous int√©resser</h3>
            {% include '@public/partials/latest-posts.html.twig' %}
        </div>
    </twig:Container>
{% endblock %}
